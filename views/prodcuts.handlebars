<h1>Lista de Productos</h1>
<table border="1">
    <tr>
        <th>Nombre</th>
        <th>Precio</th>
        <th>Categoría</th>
        <th>Stock</th>
        <th>Acción</th>
    </tr>
    {{#each products}}
    <tr>
        <td>{{this.name}}</td>
        <td>${{this.price}}</td>
        <td>{{this.category}}</td>
        <td>{{this.stock}}</td>
        <td>
            <button onclick="addToCart('{{this._id}}')">Agregar al carrito</button>
        </td>
    </tr>
    {{/each}}
</table>

{{#if hasPrevPage}}
    <a href="{{prevLink}}">Anterior</a>
{{/if}}
{{#if hasNextPage}}
    <a href="{{nextLink}}">Siguiente</a>
{{/if}}

<script>
    function addToCart(productId) {
        fetch(`/api/carts/1/products/${productId}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        }).then(response => response.json())
          .then(data => alert(data.message));
    }
</script>
